<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤ pH</title>
  <link rel="icon" href="favicon.png" type="image/png" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Kanit&display=swap');

    :root {
      --bg: #f0f8ff;
      --text: #333;
      --card: #ffffff;
      --accent: #00796b;
      --shadow: rgba(0, 0, 0, 0.1);
    }

    body.dark {
      --bg: #121212;
      --text: #eeeeee;
      --card: #1e1e1e;
      --accent: #80cbc4;
      --shadow: rgba(255, 255, 255, 0.1);
    }

    body {
      font-family: 'Kanit', sans-serif;
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--text);
      transition: all 0.3s ease;
    }

    .container {
      max-width: 1200px;
      margin: auto;
      padding: 20px;
    }

    .university-logo {
      text-align: center;
      margin-top: 20px;
    }

    .university-logo img {
      max-width: 150px;
      margin-bottom: 10px;
      box-shadow: none;
      /* ‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏á‡∏≤ */
    }

    .system-name {
      text-align: center;
      font-size: 30px;
      font-weight: bold;
      margin: 10px 0 30px;
      color: var(--accent);
      text-shadow: 1px 1px 2px var(--shadow);
    }

    .box {
      background: var(--card);
      border-radius: 16px;
      box-shadow: 0 6px 14px var(--shadow);
      padding: 30px;
      margin-bottom: 30px;
      transition: transform 0.3s ease, background 0.3s ease;
    }

    .box:hover {
      transform: translateY(-4px);
    }

    .box h2 {
      font-size: 24px;
      color: var(--accent);
      margin-bottom: 16px;
    }

    .info, .box p {
      font-size: 18px;
      margin-bottom: 8px;
    }

    .ph-value, .ultrasonic-value {
      font-size: 24px;
      font-weight: bold;
      color: #d32f2f;
    }

    canvas {
      margin-top: 20px;
      border-radius: 8px;
      background-color: #fafafa;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    table th, table td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: center;
    }

    table th {
      background-color: var(--accent);
      color: white;
    }

    table tr:nth-child(even) {
      background-color: #f9f9f9;
    }

    table tr:hover {
      background-color: #e0f7fa;
    }

    img {
      border-radius: 10px;
      margin: 10px 0;
      max-width: 100%;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    .theme-toggle {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: var(--accent);
      color: white;
      border: none;
      padding: 10px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 16px;
      box-shadow: 0 4px 10px var(--shadow);
      z-index: 999;
      transition: background 0.3s ease;
    }

    .theme-toggle:hover {
      background-color: #004d40;
    }

    /* ‡∏ã‡πà‡∏≠‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÑ‡∏ß‡πâ */
    #result1, #result2, #result3, th:nth-child(2) {
      display: none;
    }

    @media screen and (max-width: 768px) {
      .system-name {
        font-size: 22px;
      }

      .box h2 {
        font-size: 18px;
      }

      .ph-value, .ultrasonic-value {
        font-size: 18px;
      }

      table {
        font-size: 14px;
      }
    }
  </style>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script>
    let distanceData = [];
    let timeLabels = [];

    function updateValues() {
      fetch('http://192.168.100.60/')
        .then(res => res.json())
        .then(data => {
          document.getElementById('ph-value').innerText = data.ph;
          let distance = parseFloat(data.distance);
          document.getElementById('ultrasonic-value').innerText = distance.toFixed(2) + ' m';
          document.getElementById('distanceRaw').innerText = data.distanceRaw;

          let volume = (1 / 2) * 56 * distance;
          document.getElementById('water-volume').innerText = volume.toFixed(2) + ' ‡∏•‡∏π‡∏Å‡∏ö‡∏≤‡∏®‡∏Å‡πå‡πÄ‡∏°‡∏ï‡∏£';

          let results = [10, 20, 30].map(val => (volume / val).toFixed(2));
          results.forEach((res, i) => {
            document.getElementById(`result${i + 1}`).innerText = res;
            let date = new Date();
            date.setDate(date.getDate() + Math.ceil(res));
            document.getElementById(`date${i + 1}`).innerText = date.toLocaleDateString('th-TH');
          });

          const currentTime = new Date().toLocaleTimeString();
          distanceData.push(distance);
          timeLabels.push(currentTime);
          if (distanceData.length > 10) {
            distanceData.shift();
            timeLabels.shift();
          }
          myChart.update();
        })
        .catch(error => console.error('Error:', error));
    }

    function toggleTheme() {
      document.body.classList.toggle("dark");
    }

    window.onload = () => {
      document.getElementById('current-date').innerText = new Date().toLocaleDateString('th-TH');

      const ctx = document.getElementById('distanceChart').getContext('2d');
      window.myChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: timeLabels,
          datasets: [{
            label: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å (m)',
            data: distanceData,
            borderColor: 'rgba(75, 192, 192, 1)',
            backgroundColor: 'rgba(75, 192, 192, 0.2)',
            fill: true
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true
            }
          }
        }
      });

      updateValues();
      setInterval(updateValues, 5000);
    };
  </script>
</head>

<body>
  <button class="theme-toggle" onclick="toggleTheme()">üåô ‡∏™‡∏•‡∏±‡∏ö‡∏ò‡∏µ‡∏°</button>

  <div class="container">
    <div class="university-logo">
      <img src ="Ratchaphat.png" alt="Logo">
    </div>
    <div class="system-name">‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡∏£‡∏≤‡∏ä‡∏†‡∏±‡∏è‡πÄ‡∏û‡∏ä‡∏£‡∏ö‡∏∏‡∏£‡∏µ</div>
    <div class="system-name">‡∏£‡∏∞‡∏ö‡∏ö‡∏ß‡∏±‡∏î‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤ pH ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥</div>

    <div class="box">
      <h2>‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡∏Ñ‡πà‡∏≤ pH Sensor</h2>
      <p>‡∏Ñ‡πà‡∏≤ pH 0-6.9 = ‡∏Å‡∏£‡∏î | 7.1-14 = ‡∏î‡πà‡∏≤‡∏á</p>
      <div class="ph-value">‡∏Ñ‡πà‡∏≤ pH ‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î‡πÑ‡∏î‡πâ: <span id="ph-value">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</span></div>
    </div>

    <div class="box">
      <h2>‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î Ultrasonic Sensor</h2>
      <div class="info">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∂‡∏Å: <span id="ultrasonic-value">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</span></div>
      <div class="info">‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á: <span id="distanceRaw">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</span></div>
      <canvas id="distanceChart" width="400" height="200"></canvas>
      <p class="info">‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ô‡πâ‡∏≥: <span id="water-volume">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì...</span></p>
      <p class="info">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î‡∏Ñ‡πà‡∏≤: <span id="current-date">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</span></p>
    </div>

    <div class="box">
      <h2>‡∏Å‡∏£‡∏≤‡∏ü‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏•‡∏≠‡∏á</h2>
      <img src="distance.jpeg" alt="‡∏Å‡∏£‡∏≤‡∏ü‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ô‡πâ‡∏≥">
      <img src="pH.jpg" alt="‡∏Å‡∏£‡∏≤‡∏ü pH">
    </div>

    <div class="box">
      <h2>‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö pH ‡πÉ‡∏ô‡∏ö‡πà‡∏≠‡∏ô‡πâ‡∏≥</h2>
      <img src="27.png">
      <img src="28.png">
      <img src="29.png">
    </div>

    <div class="box">
      <h2>‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö pH ‡πÉ‡∏ô‡∏ô‡πâ‡∏≥‡∏Ñ‡∏≤‡∏•‡∏¥‡πÄ‡∏ö‡∏î</h2>
      <img src="6.86.jpg">
      <img src="water.jpg">
    </div>

    <div class="box">
      <h2>‡πÄ‡∏´‡∏ï‡∏∏‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏™‡∏°‡∏°‡∏∏‡∏ï‡∏¥</h2>
      <table>
        <thead>
          <tr>
            <th>‡∏´‡∏≤‡∏Å‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥</th>
            <th>‡∏Ñ‡πà‡∏≤‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î‡πÑ‡∏î‡πâ/‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥</th>
            <th>‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥‡πÑ‡∏î‡πâ‡∏ñ‡∏∂‡∏á</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>10 ‡∏•‡∏ö.‡∏°.</td><td id="result1">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</td><td id="date1">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</td></tr>
          <tr><td>20 ‡∏•‡∏ö.‡∏°.</td><td id="result2">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</td><td id="date2">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</td></tr>
          <tr><td>30 ‡∏•‡∏ö.‡∏°.</td><td id="result3">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</td><td id="date3">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î...</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</body>
</html>
